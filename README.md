# üéµ Spotify Stats

–í–µ–±-–¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å Spotify –∑ –∫—Ä–∞—Å–∏–≤–æ—é –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—î—é —Ç–∞ –¥–µ—Ç–∞–ª—å–Ω–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é.
<img width="1884" height="1019" alt="image" src="https://github.com/user-attachments/assets/fc91d292-8bd6-45ab-ba56-d2155c2ca445" />


## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- üìä **–î–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–µ–∫—ñ–≤, –∞—Ä—Ç–∏—Å—Ç—ñ–≤, –∂–∞–Ω—Ä—ñ–≤ —Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- üìà **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö** - —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –≥—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ –¥—ñ–∞–≥—Ä–∞–º–∏
- üîÑ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞** - —à–≤–∏–¥–∫–∞ –æ–±—Ä–æ–±–∫–∞ –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö
- üéØ **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏** - –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- üîó **Spotify API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö —Ç—Ä–µ–∫—ñ–≤
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω** - –ø—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
- üåô **–¢–µ–º–Ω–∞ —Ç–µ–º–∞** - —Å—Ç–∏–ª—å–Ω–∏–π Spotify-–ø–æ–¥—ñ–±–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞

### –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
<img width="1893" height="82" alt="image" src="https://github.com/user-attachments/assets/f1412387-9eef-4955-9891-420a919d4496" />

- –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–µ–∫—ñ–≤
- –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è  
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∞—Ä—Ç–∏—Å—Ç—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–ª—é–±–ª–µ–Ω–∏—Ö —Ç—Ä–µ–∫—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–ª—é–±–ª–µ–Ω–∏—Ö –∞–ª—å–±–æ–º—ñ–≤

### –î–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞
- **–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ —Ä–æ–∫–∞—Ö** - –≥—Ä–∞—Ñ—ñ–∫ –¥–∏–Ω–∞–º—ñ–∫–∏ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å
<img width="1898" height="1013" alt="image" src="https://github.com/user-attachments/assets/f2c6e0ec-9809-4693-b82e-80cba2049b1f" />


<img width="1885" height="1011" alt="image" src="https://github.com/user-attachments/assets/4b967ba0-862c-46d4-b7ae-b42230f818ee" />
- **–¢–æ–ø –∂–∞–Ω—Ä–∏** - —Ä–æ–∑–ø–æ–¥—ñ–ª –ø–æ –º—É–∑–∏—á–Ω–∏—Ö —Å—Ç–∏–ª—è—Ö
- **–¢–æ–ø 5 —Ç—Ä–µ–∫—ñ–≤** - –Ω–∞–π–±—ñ–ª—å—à –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—ñ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—ó
- **–¢–æ–ø 5 –∞—Ä—Ç–∏—Å—Ç—ñ–≤** - —É–ª—é–±–ª–µ–Ω—ñ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ
- **–ß–∞—Å–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –ø–∞—Ç—Ç–µ—Ä–Ω–∏ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è

### –¢–æ–ø –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤
<img width="1885" height="1016" alt="image" src="https://github.com/user-attachments/assets/058a4d3d-1def-4ef9-b0a5-4eb06f073ec0" />


### –¢–æ–ø –ø—ñ—Å–µ–Ω—å
<img width="1882" height="1015" alt="image" src="https://github.com/user-attachments/assets/864ae3f9-fdfc-42e9-b748-73403552ff2e" />


## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### Backend
- **Django 5.2+** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Django REST Framework** - API
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Celery** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑–∞–¥–∞—á
- **Celery Beat** - –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–¥–∞—á
- **Redis** - –±—Ä–æ–∫–µ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –∫–µ—à
- **Cloudflare R2** - —Ö–º–∞—Ä–Ω–µ —Å—Ö–æ–≤–∏—â–µ
- **Spotify Oauth** - –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Spotify

### Frontend
- **React** - —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **Chart.js** - –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- **Responsive design** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å

### DevOps
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è
- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- Python 3.11+
- Docker —Ç–∞ Docker Compose
- Git

### –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone https://github.com/denusbtw/spotify-stats.git
cd spotify-stats
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
cp .env.example .env
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env` —Ñ–∞–π–ª:
```env
DJANGO_SECRET_KEY=your-secret-key
DJANGO_DEBUG=True

DATABASE_URL=postgresql://username:password@db:5432/db_name
POSTGRES_DB=db_name
POSTGRES_USER=username
POSTGRES_PASSWORD=password

REDIS_URL=redis://redis:6379/0
ALLOWED_HOSTS=your-frontend-host

CLOUDFLARE_R2_BUCKET=your-bucket-name
CLOUDFLARE_R2_ACCESS_KEY=your-access-key
CLOUDFLARE_R2_SECRET_KEY=your-secret-key
CLOUDFLARE_R2_BUCKET_ENDPOINT=your-bucket-endpoint

SPOTIFY_CLIENT_ID=your-client-id
SPOTIFY_CLIENT_SECRET=your-client-secret
SPOTIFY_REDIRECT_URI=http://127.0.0.1:5173/spotify/callback (change to your URL)

```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
```bash
docker-compose up --build -d
```

### –ê–±–æ –ª–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫
```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ú—ñ–≥—Ä–∞—Ü—ñ—ó
python3 manage.py migrate

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
python3 manage.py createsuperuser

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python3 manage.py runserver

# –í –æ–∫—Ä–µ–º–∏—Ö —Ç–µ—Ä–º—ñ–Ω–∞–ª–∞—Ö:
celery -A spotify_stats worker --loglevel=info
celery -A spotify_stats beat --loglevel=info
```

## üì± –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. **–û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–∞–Ω—ñ –∑—ñ Spotify:**
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [Spotify Privacy Settings](https://www.spotify.com/account/privacy/)
   - –ó–∞–ø—Ä–æ—Å—ñ—Ç—å "Extended streaming history"
   - –î–æ—á–µ–∫–∞–π—Ç–µ—Å—å email –∑ –∞—Ä—Ö—ñ–≤–æ–º (–¥–æ 30 –¥–Ω—ñ–≤)

2. **–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –¥–∞–Ω—ñ:**
   - –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –≤ –¥–æ–¥–∞—Ç–∫—É
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ JSON —Ñ–∞–π–ª–∏ —á–µ—Ä–µ–∑ API –∞–±–æ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –î–æ—á–µ–∫–∞–π—Ç–µ—Å—å –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö

3. **–ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –∞–Ω–∞–ª—ñ—Ç–∏–∫—É:**
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–∞—à–±–æ—Ä–¥
   - –î–æ—Å–ª—ñ–¥–∂—É–π—Ç–µ —Ä—ñ–∑–Ω—ñ —Å–µ–∫—Ü—ñ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –§—ñ–ª—å—Ç—Ä—É–π—Ç–µ –¥–∞–Ω—ñ –∑–∞ –ø–µ—Ä—ñ–æ–¥–∞–º–∏

## üîå API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
```
POST /api/token/                 # –û—Ç—Ä–∏–º–∞–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω–∞
POST /api/token/refresh/         # –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞  
POST /api/token/verify/          # –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞
```

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á
```
GET    /api/v1/me/               # –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
PUT    /api/v1/me/               # –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
PATCH  /api/v1/me/               # –ß–∞—Å—Ç–∫–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
DELETE /api/v1/me/               # –í–∏–¥–∞–ª–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—É
```

### –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
```
GET /api/v1/me/analytics/activity/     # –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ –ø–µ—Ä—ñ–æ–¥–∞—Ö
GET /api/v1/me/analytics/stats/        # –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET /api/v1/me/analytics/top-albums/   # –¢–æ–ø –∞–ª—å–±–æ–º–∏
GET /api/v1/me/analytics/top-artists/  # –¢–æ–ø –∞—Ä—Ç–∏—Å—Ç–∏
GET /api/v1/me/analytics/top-tracks/   # –¢–æ–ø —Ç—Ä–µ–∫–∏
```

### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
```
GET  /api/v1/me/uploads/         # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
POST /api/v1/me/uploads/         # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É
```

### Spotify Integration
```
GET /api/v1/spotify/login/       # OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
GET /api/v1/spotify/callback/    # OAuth callback
```

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
‚îú‚îÄ‚îÄ config/                # Django –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ settings/          # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ urls.py            # URL —Ä–æ—É—Ç–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py            # WSGI –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ spotify_stats/         # Django –¥–æ–¥–∞—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ users/             # –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
‚îÇ   ‚îú‚îÄ‚îÄ analytics/         # –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ catalog/           # –ü—ñ—Å–Ω—ñ, –∞–ª—å–±–æ–º–∏, –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ
‚îÇ   ‚îî‚îÄ‚îÄ api/               # API
‚îú‚îÄ‚îÄ static/                # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ templates/             # HTML —à–∞–±–ª–æ–Ω–∏
‚îú‚îÄ‚îÄ docker-compose.yml     # Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ requirements.txt      # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```

## ‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

- **Database indexing** - —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è —à–≤–∏–¥–∫–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- **Query optimization** - select_related, prefetch_related
- **Caching** - Redis –∫–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **Async processing** - Celery –¥–ª—è –≤–∞–∂–∫–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å
- **Batch operations** - –≥—Ä—É–ø–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
- **File upload to Cloudflare R2** - –±–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤ —Ö–º–∞—Ä—ñ
- **OAuth token management** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
docker compose exec web python3 manage.py test

# –ó –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É
coverage run --source='.' manage.py test
coverage report
coverage html
```

- [Spotify Web API](https://developer.spotify.com/documentation/web-api/) - –∑–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö
- [Chart.js](https://www.chartjs.org/) - –∑–∞ –∫—Ä–∞—Å–∏–≤—ñ –≥—Ä–∞—Ñ—ñ–∫–∏
- [Django](https://www.djangoproject.com/) - –∑–∞ –ø–æ—Ç—É–∂–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
